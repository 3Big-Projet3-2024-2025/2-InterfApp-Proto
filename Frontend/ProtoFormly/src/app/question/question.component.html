<!-- question-form.component.html -->
<div class="question-container">
  <form [formGroup]="formQuestion" class="form-layout">
    <div class="header">
      <div class="title-group">
        <label for="inputTitleQuestion">Question Title :</label>
        <input id="inputTitleQuestion" type="text" formControlName="inputTitleQuestion" placeholder="Question {{questionId}}" />
      </div>
      <div class="button-group">
        <button class="toggle-btn" (click)="toggleContent()">{{ isContentHidden ? '&#9650;' : '&#9660;' }}</button>
        <button class="close-btn" (click)="removeQuestion()">&times;</button>
      </div>
    </div>

    <div class="content" [ngClass]="{ 'hidden': isContentHidden }">
      <div class="form-group">
        <label for="inputTypeQuestion">Type de question :</label>
        <select id="inputTypeQuestion" name="inputTypeQuestion"
          aria-label="Choose the question type" required="required" formControlName="inputTypeQuestion"
          (change)="onTypeChange(formQuestion.value.inputTypeQuestion)">
          <option *ngFor="let type of questionTypes" [value]="type">{{ type }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="inputQuestion">Question :</label>
        <input id="inputQuestion" type="text" formControlName="inputQuestion" placeholder="Question" required="required" />
      </div>

      <div *ngIf="formQuestion.value.inputTypeQuestion === 'Multiple choice'" class="form-group-inline">
        <input id="inputAnswerMultiple" type="checkbox" formControlName="inputAnswerMultiple" />
        <label for="inputAnswerMultiple"> Multiple answer possible </label>
      </div>

      <div *ngIf="formQuestion.value.inputTypeQuestion === 'Multiple choice'">
        <div formArrayName="inputChoices" *ngFor="let choice of inputChoicesArray.controls; let i = index" class="form-group">
          <label [for]="'choice' + i">Choix {{ i + 1 }} :</label>
          <div class="choice-wrapper">
            <input [id]="'inputChoice' + i" type="text" [formControlName]="i" placeholder="Choix" [name]="'inputChoice' + i" />
            <button class="delete-btn" (click)="removeChoice(i)">&times;</button>
          </div>
        </div>
        <button class="add-choice-btn" (click)="addChoice()">+</button>
      </div>

      <!-- Checkbox to indicate if the question is required -->
      <div class="form-group-inline">
        <input id="inputRequired" type="checkbox" formControlName="inputRequired" />
        <label for="inputRequired">This question is required</label>
      </div>

    </div>
  </form>

  <div class="move-buttons">
    <button class="move-up-btn" (click)="moveUp()">&#8593;</button>
    <button class="move-down-btn" (click)="moveDown()">&#8595;</button>
  </div>
</div>
